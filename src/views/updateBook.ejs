<form action="/updateBook/<%= book._id %>" method="post" enctype="multipart/form-data">
  <div class="mb-3">
    <label for="name" class="form-label">Book Name</label>
    <input
      type="text"
      class="form-control"
      id="name"
      name="name"
      value="<%= book.name %>"
      required
    />
  </div>
  <div class="mb-3">
    <label for="author" class="form-label">Author</label>
    <input
      type="text"
      class="form-control"
      id="author"
      name="author"
      value="<%= book.author %>"
      required
    />
  </div>
  <div class="mb-3">
    <label for="contributor" class="form-label">Contributor</label>
    <input
      type="text"
      class="form-control"
      id="contributor"
      name="contributor"
      value="<%= book.contributor %>"
      required
    />
  </div>
  <div class="mb-3">
    <label for="desc" class="form-label">Book Description</label>
    <textarea class="form-control" id="desc" name="desc" rows="3" required>
      <%= book.desc %>
    </textarea>
  </div>
  <div class="mb-3">
    <label for="quantity" class="form-label">Quantity</label>
    <input
      type="number"
      class="form-control"
      id="quantity"
      name="quantity"
      value="<%= book.quantity %>"
      step="0.01"
    />
  </div>
  <div class="mb-3">
    <label class="form-label">Categories</label>
    <% const categories = ['Gospel', 'New believers', 'General', 'Church', 'Bible study', 'Christ', 'Cross', 'Faith', 'Letters', 'Ministry', 'Overcomers', 'Prophetic', 'Restoration', 'Revelation', 'Suffering']; %>
    <% categories.forEach(cat => { %>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" name="categories[]" value="<%= cat %>" id="category<%= cat.replace(/ /g, '') %>" <%= book.categories.includes(cat) ? 'checked' : '' %>>
        <label class="form-check-label" for="category<%= cat.replace(/ /g, '') %>"><%= cat %></label>
      </div>
    <% }) %>
  </div>
  <div class="mb-3">
    <label for="typeOf" class="form-label">Type of Book</label>
    <select class="form-control" id="typeOf" name="typeOf" required>
      <option value="hardcopy" <%= book.typeOf === 'hardcopy' ? 'selected' : '' %>>Hardcopy</option>
      <option value="ebook" <%= book.typeOf === 'ebook' ? 'selected' : '' %>>eBook</option>
    </select>
  </div>
  <div class="mb-3">
    <label for="imagesUrl" class="form-label">Image URL</label>
    <input
      type="file"
      id="imagesUrl"
      name="imagesUrl"
      accept="image/*"
      multiple
    />
  </div>
  <div class="mb-3" id="ebookLinkContainer" style="<%= book.typeOf === 'ebook' ? 'display: block;' : 'display: none;' %>">
    <label for="ebookLink" class="form-label">eBook Link</label>
    <input
      type="url"
      class="form-control"
      id="ebookLink"
      name="ebookLink"
      value="<%= book.ebookLink || '' %>"
      placeholder="https://example.com/ebook"
    />
  </div>
  <button type="submit" class="btn btn-primary">Update Book</button>
</form>

<script>
  document.getElementById('typeOf').addEventListener('change', function() {
    const ebookLinkContainer = document.getElementById('ebookLinkContainer');
    if (this.value === 'ebook') {
      ebookLinkContainer.style.display = 'block';
    } else {
      ebookLinkContainer.style.display = 'none';
    }
  });
</script>
